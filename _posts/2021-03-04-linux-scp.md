---
layout: post
title:  "[Linux] scp 명령어 사용해 파일 전송"
date:   2021-03-03T14:25:52-05:00
author: Heejin Do
categories: linux
tags:	linux envs tmux log
---

**scp**는 **SecureCopy**의 약자로, 원격서버에 있는 파일과 폴더를 전송하거나 가져오기 위해 사용하는 명령어이다.
**ssh** 원격 접속 프로토콜을 기반으로 하며, ssh와 동일한 22번 포트를 이용하기 때문에 password/identity file을 이용해 안전하게 송수신 할 수 있다.

`local→remote`, `remote→local`, `remote→remote` 로의 송수신이 모두 가능하다.

-----

## 사용법

{% highlight bash %}
> scp [options] [source] [target]

# source : 파일을 보낼 주소
# target : 파일을 받을 주소
{% endhighlight %}

#### 1. 로컬에서 원격으로 (Local→Remote)
{% highlight bash %}
> scp [전송할 파일 경로] [유저명]@[IP주소]:[받을 경로]

EX) 로컬의 /home/example.txt 파일을 원격지의 /home/test 디렉토리로 전송
> scp /home/example.txt heejindo@141.211.xx.xxx:/home/test
{% endhighlight %}

#### 2. 원격에서 로컬로 (Remote→Local)
{% highlight bash %}
> scp [유저명]@[IP주소]:[전송할 파일 경로] [받을 경로]

EX) 원격지의 /home/test.txt 파일을 로컬의 /home/example 디렉토리로 전송
> scp heejindo@141.211.xx.xxx:/home/test.txt /home/example
{% endhighlight %}

#### 3. 원격에서 원격으로 (Remote→Remote)
{% highlight bash %}
> scp [유저명]@[IP주소]:[전송할 파일 경로] [유저명]@[IP주소]:[받을 경로]

EX) A 원격지의 /home/test.txt 파일을 B 원격지의 /home/example 디렉토리로 전송
> scp heejindo@141.211.xx.xxx:/home/test.txt heejindo@141.223.xx.xxx:/home/example
{% endhighlight %}

-------

## 옵션 (options)

- `-r`: 폴더를 복사할 때 사용(전송 대상을 폴더로 지정). 모든 폴더들을 재귀적으로 복사함.
- `-P`: ssh 포트 지정
- `-i`: identity file을 지정해서 사용(identity file 경로를 지정)
{% highlight bash %}
> ex) scp -i ~/.ssh/dhj-server-private ~/example.txt dhj@141.223.xx.xxx:/home/test
{% endhighlight %}
- `-v`: 상세내용을 보면서 디버깅 할 때 사용(verbose 모드)
- `-p`: 전송 시 파일 수정 시간과 권한을 유지
{% highlight bash %}
> ex) scp -P 22 dhj@141.223.xx.xxx:/home/dhj/example.txt /home/test
{% endhighlight %}

-----

## 복수의 파일 전송

#### 1. 로컬에서 원격으로 (Local→Remote)
{% highlight bash %}
> scp [옵션] [파일명1] [파일명2] [유저명]@[IP주소]:[받을 경로]
{% endhighlight %}

#### 2. 원격에서 로컬로 (Remote→Local)
1번의 경우와 다르게 원격지에서 보낼 파일들의 경로를 " "을 이용해 묶어준다.

{% highlight bash %}
> scp [옵션] [유저명]@[IP주소]:"[파일명1] [파일명2]" [받을 경로]
{% endhighlight %}

#### 3. 원격에서 원격으로 (Remote→Remote)
마찬가지로 원격지에서 보낼 파일들의 경로를 " "을 이용해 묶어준다.

{% highlight bash %}
> scp [옵션] [유저명]@[IP주소]:"[파일명1] [파일명2]" [유저명]@[IP주소]:[받을 경로]
{% endhighlight %}

----- 